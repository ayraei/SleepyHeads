import java.io.BufferedReader;
import java.io.FileNotFoundException;
import java.io.FileReader;
import java.io.IOException;
import java.util.HashMap;

public class BaselinePredictorApp {
	/* Fields */
	/** Location of index file **/
	private static String fileLoc = 
			"/Users/debranangel/Documents/2014-15/CNS156b/um_sorted/trainingAll.dta";

	/** Collections of all user IDs and movie IDs. **/
	public HashMap<Integer, UserProfile> allUsers;
	public HashMap<Integer, MovieProfile> allMovies;

	/** Constructor **/
	public BaselinePredictorApp() {
		this.allUsers = new HashMap<Integer, UserProfile>();
		this.allMovies = new HashMap<Integer, MovieProfile>();
	}
	
	/* Methods */
	/** Check if user already exists. **/
	public boolean checkUser(int userID) {
		return this.allUsers.containsKey(userID);
	}
	
	/** Check if movie already exists. **/
	public boolean checkMovie(int movieID) {
		return this.allMovies.containsKey(movieID);
	}
	
	/* Program enters here */
	public static void main(String[] args) {
		BaselinePredictorApp app = new BaselinePredictorApp();
		
		/* Set up reader to read from file */
		String line;
		String[] dataArray = null;
		BufferedReader br = null;
		try {
			br = new BufferedReader(new FileReader(fileLoc));
		} catch (FileNotFoundException e) {
			e.printStackTrace();
		}

		/* Read from file until reach the end of file */
		try {
			while ((line = br.readLine()) != null) {
				System.out.println(line);
				
				/*
				 * Splits line data into a data array such that entries:
				 * 0: user number
				 * 1: movie number
				 * 2: date
				 * 3: rating
				 * Note that these are strings and need to be casted into ints
				 */
				dataArray = line.split("\\s+");
				
				/* Check if user already exists */
				if (app.checkUser(Integer.parseInt(dataArray[0]))) {
					
				} 
				/* Otherwise create new user */
				else {
					UserProfile up = new UserProfile(app);
				}
				
				/* Check if movie already exists */
				if (app.checkMovie(Integer.parseInt(dataArray[1]))) {
					
				} 
				/* Otherwise create new movie */
				else {
					MovieProfile mp = new MovieProfile(app);
				}
				
			}
		} catch (IOException e) {
			e.printStackTrace();
		}
	}
}
